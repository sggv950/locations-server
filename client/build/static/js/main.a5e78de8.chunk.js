(this["webpackJsonpwixeditor-assignment-app"]=this["webpackJsonpwixeditor-assignment-app"]||[]).push([[0],{193:function(t,e,n){},194:function(t,e,n){},199:function(t,e,n){},202:function(t,e,n){},203:function(t,e,n){},401:function(t,e,n){},402:function(t,e,n){},404:function(t,e,n){},405:function(t,e,n){},406:function(t,e,n){},437:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(38),o=n.n(r),i=(n(193),n(78)),s=(n(194),n(76)),l=n(77),u=(n(199),n(1)),d=function(){return Object(u.jsxs)("header",{className:"app-header",children:[Object(u.jsx)("h2",{children:"Locations App"}),Object(u.jsx)("a",{href:"https://github.com/sggv950/wix-editor-locations-app",target:"_blank",children:Object(u.jsx)(s.a,{icon:l.a,size:"lg"})})]})},j=n(49),p=function(){return Object(j.b)()},b=j.c,f=(n(202),function(t){var e=t.selectedLocation,n=e.name,c=e.address,a=e.website;return Object(u.jsxs)("div",{className:"location-info-container",children:[Object(u.jsx)("strong",{children:"Location details:"}),Object(u.jsxs)("div",{className:"location-info-text",children:[Object(u.jsx)("p",{children:n}),!!a&&Object(u.jsx)("strong",{children:Object(u.jsx)("a",{href:a,target:"_blank",children:"website"})}),Object(u.jsxs)("p",{children:[Object(u.jsx)("strong",{children:"address:"})," ",c]})]})]})}),O=(n(203),n(51)),h={fullscreenControl:!1,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1},x=Object(O.withScriptjs)(Object(O.withGoogleMap)((function(t){return Object(u.jsx)(O.GoogleMap,{defaultOptions:h,defaultZoom:13,center:{lat:+t.lat,lng:+t.lng},children:Object(u.jsx)(O.Marker,{position:{lat:+t.lat,lng:+t.lng}})})}))),v=(n(401),function(){var t=b((function(t){return t.selectedLocation}));return Object(u.jsxs)("div",{className:"location-details-container",children:[t&&Object(u.jsx)(f,{selectedLocation:t}),t&&Object(u.jsx)(x,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyBFxnXjbVf-i6HU7-VsWzA6-w8FBEYZZsQ","&v=3.exp&libraries=geometry,places"),loadingElement:Object(u.jsx)("div",{style:{height:"100%"}}),containerElement:Object(u.jsx)("div",{style:{height:"100%"}}),mapElement:Object(u.jsx)("div",{style:{height:"100%"}}),lat:t.lat,lng:t.lng}),!t&&Object(u.jsxs)("div",{className:"location-details-placeholder",children:[Object(u.jsx)(s.a,{icon:l.b,size:"4x",color:"#20303c",opacity:"0.3"}),Object(u.jsxs)("p",{children:["looks like no location is active",Object(u.jsx)("br",{}),"add or pick one..."]})]})]})}),m=(n(402),n(14)),g=n.n(m),y=n(29),L="/api",N="".concat(L,"/autocomplete"),C="".concat(L,"/place"),k="".concat(L,"/locations"),w=function(){var t=Object(y.a)(g.a.mark((function t(){var e,n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(k));case 3:return e=t.sent,t.next=6,e.json();case 6:return n=t.sent,c=n.locations,t.abrupt("return",c);case 11:return t.prev=11,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(y.a)(g.a.mark((function t(e){var n,c,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(N,"/").concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:return c=t.sent,a=c.map(A),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Object(y.a)(g.a.mark((function t(e){var n,c,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(C,"/").concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:return c=t.sent,a=T(c),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function T(t){return{id:t.place_id,name:t.name,address:t.formatted_address,lat:"".concat(t.geometry.location.lat),lng:"".concat(t.geometry.location.lng),website:t.website}}function A(t){return{id:t.place_id,description:t.description}}var _="SET_LOCATIONS",I="ADD_LOCATION",B="REMOVE_LOCATION",R="SET_ACTIVE_LOCATION",F="DEACTIVATE_LOCATION",M="UPDATE_SEARCH_RESULTS",V=function(t){return{type:_,payload:t}},z=function(t){return{type:I,payload:t}},D=function(t){return{type:"server/add",payload:t}},P=function(t){return function(e){E(t).then((function(t){e(U(t))}))}},U=function(t){return{type:M,payload:t}},Z=function(t){return{type:R,payload:t}},G=(n(404),function(t){var e=t.location,n=t.selectedLocationId,c=p(),a=e.id,r=e.name,o=e.address,i=a===n;return Object(u.jsxs)("div",{className:"location-item-container ".concat(i?"selected-location":""),onClick:function(){c(Z(a))},children:[Object(u.jsx)("button",{className:"remove-location-btn",onClick:function(t){t.stopPropagation(),i&&c({type:F}),c({type:B,payload:a}),c(function(t){return{type:"server/remove",payload:t}}(a))},children:"\xd7"}),Object(u.jsx)("div",{className:"location-item-name",children:r}),Object(u.jsx)("div",{className:"location-item-address",children:o})]})}),H=function(){var t=b((function(t){return t.locationsList})),e=b((function(t){return t.selectedLocation})),n=e?e.id:"";return Object(u.jsx)("div",{className:"location-list-container",children:t.map((function(t){return Object(u.jsx)(G,{location:t,selectedLocationId:n},t.id)}))})},J=n(185),Q=n.n(J),W=(n(405),function(t){var e=t.handleToggleLocationSearch,n=Object(c.useState)(""),a=Object(i.a)(n,2),r=a[0],o=a[1],s=b((function(t){return t.searchResults})),l=p();Object(c.useEffect)((function(){l(U([]))}),[]);var d=Object(c.useCallback)(Q()(function(){var t=Object(y.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l(e?P(e):U([]));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),1e3),[]),j=function(){var t=Object(y.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(n);case 2:c=t.sent,l(z(c)),l(Z(n)),l(D(c)),e(!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"location-search-container",children:[Object(u.jsx)("p",{className:"location-search-title",children:"Search for location:"}),Object(u.jsx)("input",{className:"location-search-input",value:r,onChange:function(t){var e=t.target.value;o(e),d(e)},type:"text"}),Object(u.jsx)("div",{className:"location-search-results",children:Object(u.jsx)("ul",{className:"location-search-results-list",children:!!s.length&&s.map((function(t){return e=t,n=j,Object(u.jsx)("li",{onClick:function(){return n(e.id)},className:"location-search-results-item",children:e.description},e.id);var e,n}))})})]})}),X=(n(406),function(t){var e=t.isLocationSearch,n=t.onButtonClick,c=function(t){return n(t)};return Object(u.jsx)("div",{className:"buttons-container",children:e?Object(u.jsx)("button",{onClick:function(){return c(!1)},className:"menu-btn close-btn",children:"Back"}):Object(u.jsx)("button",{onClick:function(){return c(!0)},className:"menu-btn add-location-btn",children:"+ Add location"})})});var Y=function(){var t=Object(c.useState)(!1),e=Object(i.a)(t,2),n=e[0],a=e[1],r=p();return Object(c.useEffect)((function(){r((function(t){w().then((function(e){var n=e[0].id||"";t(V(e)),t(Z(n))}))}))}),[]),Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)(d,{}),Object(u.jsx)(X,{isLocationSearch:n,onButtonClick:a}),!n&&Object(u.jsx)(H,{}),n&&Object(u.jsx)(W,{handleToggleLocationSearch:a}),Object(u.jsx)(v,{})]})},q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,438)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),c(t),a(t),r(t),o(t)}))},K=n(186),$=n(187),tt=n.n($),et=n(188),nt=n.n(et),ct=n(113),at=n(80),rt=n(11),ot=function(t){return function(e){return t!==e}},it={locationsList:[],selectedLocation:null,searchResults:[]},st=tt()(),lt=nt()(st,"server/"),ut=Object(ct.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,e=arguments.length>1?arguments[1]:void 0;if(e.type===_)return Object(rt.a)(Object(rt.a)({},t),{},{locationsList:Object(at.a)(e.payload)});if(e.type===I){var n=Object(rt.a)({},e.payload);return Object(rt.a)(Object(rt.a)({},t),{},{locationsList:[n].concat(Object(at.a)(t.locationsList))})}if(e.type===B){var c=ot(e.payload),a=t.locationsList.filter((function(t){return c(t.id)})),r=a.find((function(e){var n;return e.id===(null===(n=t.selectedLocation)||void 0===n?void 0:n.id)}))||null;return Object(rt.a)(Object(rt.a)({},t),{},{selectedLocation:r,locationsList:a})}if(e.type===M){var o=e.payload;return Object(rt.a)(Object(rt.a)({},t),{},{searchResults:o})}if(e.type===R){var i=Object(at.a)(t.locationsList),s=i.find((function(t){return t.id===e.payload}))||null;return Object(rt.a)(Object(rt.a)({},t),{},{selectedLocation:s})}if(e.type===F){var l=null;return Object(rt.a)(Object(rt.a)({},t),{},{selectedLocation:l})}return t}),Object(ct.a)(lt,K.a));o.a.render(Object(u.jsx)(j.a,{store:ut,children:Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(Y,{})})}),document.getElementById("root")),q()}},[[437,1,2]]]);
//# sourceMappingURL=main.a5e78de8.chunk.js.map